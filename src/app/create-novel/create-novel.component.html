<app-navbar></app-navbar>
<div class="containerfornav">
  <div class="container-page">
    <div class="container">
      <div class="form-group">
        <div class="header">
          ‡∏ô‡∏¥‡∏¢‡∏≤‡∏¢ (‡∏ö‡∏£‡∏£‡∏¢‡∏≤‡∏¢)
        </div>
        <div class="file-upload-head">
          <div class="file-upload-sub">
            <div class="file-upload" (click)="fileInput.click()">
              <label class="file-label">
                <i class="upload-icon">üìÅ</i>
                <p>Drag & Drop your files here or click to upload</p>
              </label>
              <div id="croppedImageContainer">
                <img id="croppedImage" alt="Cropped Image Preview" />
              </div>
              <input #fileInput type="file" id="fileInput" (change)="handleFileSelect($event)" style="display: none;" />

            </div>


            <div id="cropModal" style="display: none;">
              <img id="imagePreview" alt="Image preview for cropping" />
              <button (click)="cropImage()">Crop</button>
              <button (click)="closeModal()">Close</button>
            </div>

            <button (click)="submitProfilePic()">‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û</button>
            <a>+ ‡∏ô‡∏≤‡∏°‡∏õ‡∏≤‡∏Å‡∏Å‡∏≤</a>
          </div>
          <div id="croppedImageContainer" style="display: none;">
            <img id="croppedImage" alt="Cropped Image Preview" />
          </div>



          <div class="form-group-1">
            <label for="title">‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á</label>
            <input id="title" name="title" [(ngModel)]="novel.novelName" type="text">
            <label for="subtitle">‡∏Ñ‡∏≥‡πÇ‡∏õ‡∏£‡∏¢/‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏¢‡πà‡∏≠</label>
            <textarea id="subtitle" name="subtitle" [(ngModel)]="novel.desc" type="text"></textarea>
          </div>
        </div>
      </div>


      <div class="form-group">
        <label for="main-category">‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏´‡∏•‡∏±‡∏Å</label>
        <div class="dropdown-container">

          <select id="subItemSelect" [(ngModel)]="selectedItem" (change)="onSelectItem($event)">
            <option value="" disabled selected>Select an option</option>
            <!-- Group items -->
            <optgroup *ngFor="let group of groupedData | keyvalue" [label]="group.key">
              <!-- Sub-item option with tooltip for 'desc' on hover -->
              <option *ngFor="let subItem of group.value" [value]="subItem.label" [title]="subItem.desc">
                {{ subItem.label }}
              </option>
            </optgroup>
          </select>
        </div>


        <div class="main-category-sub">
          <div class="category-sub">
            <label for="sub-category1">‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏£‡∏≠‡∏á 1 (‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏™‡πà)</label>
            <select id="sub-category1" name="sub-category1" [(ngModel)]="novel.selectedSubCategory1" >
                <option *ngFor="let subGroup of filteredSubGroups('sub-category1')" [value]="subGroup.label">
                    {{ subGroup.label }}
                </option>
            </select>
        </div>
        
        <div class="category-sub">
            <label for="sub-category2">‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏£‡∏≠‡∏á 2 (‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏™‡πà)</label>
            <select id="sub-category2" name="sub-category2" [(ngModel)]="novel.selectedSubCategory2" >
                <option *ngFor="let subGroup of filteredSubGroups('sub-category2')" [value]="subGroup.label">
                    {{ subGroup.label }}
                </option>
            </select>
        </div>
        
        </div>
      </div>

      <div class="form-group">
        <label for="rating">‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ç‡∏≠‡∏á‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤ (Rating)</label>
        <select id="rating" name="rating" [(ngModel)]="novel.rate">
          <option>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ç‡∏≠‡∏á‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤</option>
        </select>
        <label class="tags-head">‡πÅ‡∏ó‡πá‡∏Å (0/18)</label>
        <div class="tags">
          <span *ngFor="let tag of tags">{{ tag }}</span>
        </div>
        <label for="tags">‡πÅ‡∏ó‡πá‡∏Å‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥</label>
        <div class="tags">
          <span *ngFor="let tag of tageRec" (click)="addTagRec(tag.tag)" class="tag">{{ tag.tag }}</span>
        </div>
        <input id="tags" name="tags" type="text" placeholder="‡πÉ‡∏™‡πà‡πÅ‡∏ó‡πá‡∏Å‡πÄ‡∏û‡∏¥‡πà‡∏° (‡∏Å‡∏î Enter ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÅ‡∏ó‡πá‡∏Å‡πÉ‡∏´‡∏°‡πà)"
          (keyup.enter)="addTag()" [(ngModel)]="newTag" />
      </div>

      <div class="buttons">
        <button class="back-button" (click)="goBack()">‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö</button>
        <button class="submit-button" (click)="submit()">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
      </div>
    </div>
  </div>
</div>